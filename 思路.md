# 评分标准
平台根据下面 3 个因素自动打分：
稳定性：Assign/Release 接口执行成功率 > 99.95% 为达标（接口本身执行错误，或返回的无效的 Slot、未 Init 初始化或者已经分配给其它请求的实例均为执行失败)，只有稳定性达标，后续性能相关统计才有效
资源使用占比（权重 50%）： “请求执行总消耗/Slot 总消耗” ，越高越好
冷启动时间占比（权重 50%）：“请求执行总时间/(调度总时间 + 请求执行总时间)”，越高越好
打分规则：
如果成功率低于99.95%，得分为0，反之最终得分为：

（请求执行总消耗/Slot 总消耗 + 请求执行总时间/(调度总消耗 + 请求执行总时间)）* 100/2

得分越高越好。

名词解释：

GBs: 如果资源配置为 1GB, 使用时间 1s，则消耗 1GBs(GB秒)
Slot: 未被初始化的实例。
Slot 总消耗：用户调用 CreateSlot 与 DeleteSlot 之间时间为 Slot 占用时间，如果 Slot 配置为 1GB，分配了 100 个, Slot存活了10s， 则总消耗为 1000GBs
请求执行总消耗：每次请求执行前会调用 Assgin，执行完成后调用 Release，请求执行 1s，执行了 100 次，如果请求的资源配置 为1GB, 则总消耗为 100GBs
请求执行总时间：每次请求执行前会调用 Assgin，执行完成后调用 Release，请求执行 1s，执行了 100 次，则总时间为100s
调度总时间：每次请求 执行前会调用 Assign（可能包括冷启动时间），执行完成后调用 Release，调度总时间是所有Assign + Release的总耗时；

# cost

## 如果计算cost 方程式？？？

资源使用占比（权重 50%）： “请求执行总消耗/Slot 总消耗” ，越高越好

冷启动时间占比（权重 50%）：“请求执行总时间/(调度总时间 + 请求执行总时间)”，越高越好

- 冷启动时间需要尽可能低， 但是越低，资源使用占比会越高，需要找到一个中间的最优解。

一些偏直观的思路

- 如果是处于请求量上涨的情况下，需要减少instance的回收，以及采用保持instance的策略

- 如果是处于请求量下降的情况下，需要尽可能的回收多余的instance，减少资源的浪费

- 请求量不变的情况下， assign 和 release 分别需要的时间？？

- 如何预测到后面会有大量同类型的任务到来


## 其他因素限制

- **超时时间** 非常重要，需要提高策略的优先级，保证不超时

# 开发点

- asign

- idle 判断是否需要保留（单位：type；参数：当前该空闲的instance数，是否处于qps上涨阶段，超时时间比较短）

- gcLoop方法 config配置

- calculate 得分方程，for 优化调参

- test cost 方程式，本地run